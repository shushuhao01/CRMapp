# CRM外呼助手 APP 产品设计文档 v2.0

## 一、产品定位

**产品名称：** CRM外呼助手  
**产品类型：** 电销工作手机APP  
**目标用户：** 电销人员、客服人员、销售团队  
**核心价值：** 
- PC端CRM远程控制手机拨号
- 手机端主动外呼、接听来电
- 通话录音自动上传
- 通话数据实时同步统计

---

## 二、功能架构

### 2.1 底部导航结构（4个Tab）

```
┌─────────┬─────────┬─────────┬─────────┐
│  🏠     │  📞     │  📊     │  ⚙️     │
│  首页   │  通话   │  统计   │  设置   │
└─────────┴─────────┴─────────┴─────────┘
```

### 2.2 功能模块清单

| 模块 | 功能 | 优先级 | 说明 |
|------|------|--------|------|
| **服务器配置** | 服务器地址配置 | P0 | 多租户支持，首次使用必须配置 |
| | 扫码配置 | P0 | 扫描二维码快速配置服务器 |
| | 历史服务器 | P1 | 保存最近使用的服务器列表 |
| | 连接测试 | P0 | 测试服务器是否可连接 |
| **首页** | 连接状态 | P0 | WebSocket在线状态 |
| | 用户信息 | P0 | 当前登录用户、绑定状态 |
| | 今日概览 | P0 | 今日通话数、接通率等 |
| | 快捷操作 | P1 | 扫码绑定、手动拨号入口 |
| **通话** | 通话记录列表 | P0 | 呼入/呼出/未接记录 |
| | 拨号盘 | P0 | 手动输入号码拨打 |
| | 回拨功能 | P0 | 点击记录快速回拨 |
| | 录音播放 | P1 | 播放通话录音 |
| | 记录筛选 | P1 | 按类型/日期筛选 |
| | 通话跟进 | P0 | 通话结束后添加备注和标签 |
| **统计** | 通话统计 | P0 | 总数、接通、未接 |
| | 时长统计 | P0 | 总时长、平均时长 |
| | 趋势图表 | P1 | 日/周/月趋势 |
| | 排行榜 | P2 | 团队排名（可选） |
| **设置** | 账号信息 | P0 | 用户、设备信息 |
| | 录音设置 | P0 | 自动录音开关 |
| | 通知设置 | P1 | 来电提醒、振动 |
| | 服务器设置 | P0 | 切换/配置服务器 |
| | 解绑/退出 | P0 | 解绑设备、退出登录 |
| **通话中** | 通话界面 | P0 | 计时、客户信息 |
| | 来电弹窗 | P0 | 显示来电信息 |
| | 拨号指令弹窗 | P0 | PC端发起的拨号请求 |
| **通话结束** | 通话备注 | P0 | 记录通话内容 |
| | 快捷标签 | P0 | 意向/无意向/再联系/成交 |
| | 客户意向 | P1 | 高/中/低/无 |
| | 下次跟进 | P1 | 设置下次跟进时间 |

---

## 三、页面原型设计

### 3.1 页面结构总览

```
APP页面结构
├── 启动页 (Splash)
├── 服务器配置页 (ServerConfig) - 首次使用必须配置
├── 登录页 (Login)
├── 主框架 (TabBar)
│   ├── 首页 (Home)
│   ├── 通话 (Calls)
│   ├── 统计 (Stats)
│   └── 设置 (Settings)
├── 拨号盘 (Dialpad) - 弹出层
├── 扫码绑定 (Scan)
├── 通话中 (Calling)
├── 来电接听 (Incoming)
├── 通话详情 (CallDetail)
└── 通话结束 (CallEnded) - 跟进记录
```

---

## 📱 1. 启动页 (Splash)

```
┌─────────────────────────────────┐
│                                 │
│                                 │
│                                 │
│          ┌─────────┐            │
│          │  LOGO   │            │
│          │   📞    │            │
│          └─────────┘            │
│                                 │
│        CRM外呼助手              │
│        ─────────────            │
│        高效外呼 · 智能管理       │
│                                 │
│                                 │
│          ○ ○ ○                  │
│         加载中...               │
│                                 │
│                                 │
│           v1.0.0                │
└─────────────────────────────────┘
```

---

## 📱 2. 服务器配置页 (ServerConfig) - 首次使用必须配置

```
┌─────────────────────────────────┐
│  ←  服务器设置                  │
├─────────────────────────────────┤
│                                 │
│  当前服务器                     │
│  ┌─────────────────────────┐    │
│  │ 🌐 abc789.cn            │    │
│  │    状态: ✅ 已连接       │    │
│  └─────────────────────────┘    │
│                                 │
│  输入服务器地址                 │
│  ┌─────────────────────────┐    │
│  │ 请输入域名或IP地址       │    │
│  │ 例如: abc789.cn          │    │
│  └─────────────────────────┘    │
│  支持格式：域名、IP:端口        │
│                                 │
│  ┌─────────────────────────┐    │
│  │       测试并保存         │    │
│  │      (渐变绿色按钮)      │    │
│  └─────────────────────────┘    │
│                                 │
│  ┌─────────────────────────┐    │
│  │    📷 扫码配置服务器     │    │
│  └─────────────────────────┘    │
│                                 │
│  历史服务器                     │
│  ─────────────────────────────  │
│  ┌─────────────────────────┐    │
│  │ 🌐 abc789.cn        ✓   │    │
│  │    最近: 12-25          │    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │ 🌐 test.company.com     │    │
│  │    最近: 12-20          │    │
│  └─────────────────────────┘    │
│                                 │
│  💡 提示：请向管理员获取服务器  │
│     地址，或扫描配置二维码      │
│                                 │
└─────────────────────────────────┘
```

**服务器地址格式说明：**
- 域名格式：`abc789.cn`（自动使用https）
- IP格式：`192.168.1.100:3000`（内网自动使用http）
- 完整格式：`https://abc789.cn`

**多租户场景：**
- A公司员工输入：`abc789.cn`
- B公司员工输入：`company-b.com`
- 测试环境输入：`192.168.1.100:3000`

---

## 📱 3. 登录页 (Login)

```
┌─────────────────────────────────┐
│                                 │
│          ┌─────────┐            │
│          │  LOGO   │            │
│          │   📞    │            │
│          └─────────┘            │
│        CRM外呼助手              │
│                                 │
│   ┌───────────────────────┐     │
│   │ 👤  请输入用户名       │     │
│   └───────────────────────┘     │
│                                 │
│   ┌───────────────────────┐     │
│   │ 🔒  请输入密码         │     │
│   └───────────────────────┘     │
│                                 │
│   ☑ 记住密码    ☐ 自动登录     │
│                                 │
│   ┌───────────────────────┐     │
│   │         登  录         │     │
│   │      (渐变绿色按钮)     │     │
│   └───────────────────────┘     │
│                                 │
│   ─────────────────────────     │
│   服务器: abc789.cn             │
│          [ 切换服务器 ]         │
│                                 │
└─────────────────────────────────┘
```

---

## 📱 3. 首页 (Home) - Tab1

```
┌─────────────────────────────────┐
│  CRM外呼助手              🔔    │
├─────────────────────────────────┤
│                                 │
│  ┌─────────────────────────┐    │
│  │  👤 张三 · 销售部        │    │
│  │  ─────────────────────  │    │
│  │  🟢 已连接服务器         │    │
│  │  📱 设备已绑定           │    │
│  │  ⏰ 在线 2小时35分       │    │
│  └─────────────────────────┘    │
│                                 │
│  今日概览                       │
│  ┌──────┐ ┌──────┐ ┌──────┐    │
│  │  12  │ │  8   │ │  4   │    │
│  │ 总拨打│ │ 已接通│ │ 未接通│    │
│  │  📞  │ │  ✅  │ │  ❌  │    │
│  └──────┘ └──────┘ └──────┘    │
│                                 │
│  ┌──────┐ ┌──────┐ ┌──────┐    │
│  │ 45分 │ │ 66%  │ │  3   │    │
│  │总时长 │ │接通率 │ │ 来电 │    │
│  │  ⏱️  │ │  📈  │ │  📲  │    │
│  └──────┘ └──────┘ └──────┘    │
│                                 │
│  快捷操作                       │
│  ┌───────────┐ ┌───────────┐   │
│  │  📷       │ │  📞       │   │
│  │ 扫码绑定  │ │ 手动拨号  │   │
│  └───────────┘ └───────────┘   │
│                                 │
│  ┌─────────────────────────┐    │
│  │ 💡 等待PC端拨号指令...   │    │
│  └─────────────────────────┘    │
│                                 │
├─────────────────────────────────┤
│  🏠      📞      📊      ⚙️    │
│  首页    通话    统计    设置   │
└─────────────────────────────────┘
```

### 首页状态变化

**未绑定状态：**
```
┌─────────────────────────────┐
│  👤 张三 · 销售部           │
│  ─────────────────────────  │
│  🟡 已连接，未绑定设备      │
│                             │
│  ┌───────────────────────┐  │
│  │    📷 扫码绑定设备     │  │
│  │   请在PC端生成二维码   │  │
│  └───────────────────────┘  │
└─────────────────────────────┘
```

**断开连接状态：**
```
┌─────────────────────────────┐
│  👤 张三 · 销售部           │
│  ─────────────────────────  │
│  🔴 连接已断开              │
│                             │
│  ┌───────────────────────┐  │
│  │      🔄 重新连接       │  │
│  └───────────────────────┘  │
│                             │
│  上次在线: 14:30            │
└─────────────────────────────┘
```

---

## 📱 4. 通话页 (Calls) - Tab2

```
┌─────────────────────────────────┐
│  通话记录                  🔍   │
├─────────────────────────────────┤
│  ┌───────┐┌───────┐┌───────┐   │
│  │ 全部  ││ 呼出  ││ 呼入  │   │
│  │ (15)  ││ (12)  ││ (3)   │   │
│  └───────┘└───────┘└───────┘   │
├─────────────────────────────────┤
│                                 │
│  今天 12月25日                  │
│  ─────────────────────────────  │
│                                 │
│  ┌─────────────────────────┐    │
│  │ 📤 王先生                │    │
│  │    138****1234          │    │
│  │    ✅ 已接通 · 3分25秒   │    │
│  │    14:30                │    │
│  │              📞  ▶️  ℹ️ │    │
│  └─────────────────────────┘    │
│                                 │
│  ┌─────────────────────────┐    │
│  │ 📥 李女士                │    │
│  │    139****5678          │    │
│  │    📲 来电 · 2分10秒     │    │
│  │    14:15                │    │
│  │              📞  ▶️  ℹ️ │    │
│  └─────────────────────────┘    │
│                                 │
│  ┌─────────────────────────┐    │
│  │ 📤 张总                  │    │
│  │    136****9012          │    │
│  │    ❌ 未接通             │    │
│  │    13:45                │    │
│  │              📞      ℹ️ │    │
│  └─────────────────────────┘    │
│                                 │
│  昨天 12月24日                  │
│  ─────────────────────────────  │
│  ┌─────────────────────────┐    │
│  │ 📤 赵经理               │    │
│  │    ...                  │    │
│  └─────────────────────────┘    │
│                                 │
│         ┌───────────┐           │
│         │  📞 拨号  │           │
│         │  (浮动按钮)│           │
│         └───────────┘           │
│                                 │
├─────────────────────────────────┤
│  🏠      📞      📊      ⚙️    │
│  首页    通话    统计    设置   │
└─────────────────────────────────┘
```

**图标说明：**
- 📤 呼出电话
- 📥 呼入电话（来电）
- 📞 回拨按钮
- ▶️ 播放录音
- ℹ️ 查看详情

---

## 📱 5. 拨号盘 (Dialpad) - 弹出层

```
┌─────────────────────────────────┐
│                          ✕     │
│                                 │
│  ┌─────────────────────────┐    │
│  │     138 1234 5678       │    │
│  │     (输入框/显示号码)    │    │
│  └─────────────────────────┘    │
│                                 │
│     ┌───┐  ┌───┐  ┌───┐        │
│     │ 1 │  │ 2 │  │ 3 │        │
│     │   │  │ABC│  │DEF│        │
│     └───┘  └───┘  └───┘        │
│                                 │
│     ┌───┐  ┌───┐  ┌───┐        │
│     │ 4 │  │ 5 │  │ 6 │        │
│     │GHI│  │JKL│  │MNO│        │
│     └───┘  └───┘  └───┘        │
│                                 │
│     ┌───┐  ┌───┐  ┌───┐        │
│     │ 7 │  │ 8 │  │ 9 │        │
│     │PQRS│ │TUV│  │WXYZ│       │
│     └───┘  └───┘  └───┘        │
│                                 │
│     ┌───┐  ┌───┐  ┌───┐        │
│     │ * │  │ 0 │  │ # │        │
│     │   │  │ + │  │   │        │
│     └───┘  └───┘  └───┘        │
│                                 │
│         ┌─────────┐             │
│         │   📞    │             │
│         │  拨打   │             │
│         │(绿色圆形)│             │
│         └─────────┘             │
│                    ⌫           │
│                  (删除)         │
│                                 │
└─────────────────────────────────┘
```

---

## 📱 6. 统计页 (Stats) - Tab3

```
┌─────────────────────────────────┐
│  通话统计                  📅   │
├─────────────────────────────────┤
│  ┌───────┐┌───────┐┌───────┐   │
│  │ 今日  ││ 本周  ││ 本月  │   │
│  └───────┘└───────┘└───────┘   │
├─────────────────────────────────┤
│                                 │
│  通话概览                       │
│  ┌─────────────────────────┐    │
│  │                         │    │
│  │    ┌─────────────┐      │    │
│  │    │     56      │      │    │
│  │    │   总通话    │      │    │
│  │    └─────────────┘      │    │
│  │                         │    │
│  │  ┌─────┐    ┌─────┐     │    │
│  │  │ 42  │    │ 14  │     │    │
│  │  │接通 │    │未接 │     │    │
│  │  │ ✅  │    │ ❌  │     │    │
│  │  └─────┘    └─────┘     │    │
│  │                         │    │
│  └─────────────────────────┘    │
│                                 │
│  时长统计                       │
│  ┌─────────────────────────┐    │
│  │  总时长      2小时35分   │    │
│  │  ━━━━━━━━━━━━━━━━━━━━━  │    │
│  │  平均时长    3分42秒     │    │
│  │  ━━━━━━━━━━━━━━━━━━━━━  │    │
│  │  最长通话    15分20秒    │    │
│  │  ━━━━━━━━━━━━━━━━━━━━━  │    │
│  │  接通率      75%         │    │
│  │  ████████████░░░░       │    │
│  └─────────────────────────┘    │
│                                 │
│  通话趋势                       │
│  ┌─────────────────────────┐    │
│  │     📈                  │    │
│  │   ╱╲    ╱╲              │    │
│  │  ╱  ╲  ╱  ╲   ╱         │    │
│  │ ╱    ╲╱    ╲ ╱          │    │
│  │╱            ╲           │    │
│  │ 一 二 三 四 五 六 日     │    │
│  └─────────────────────────┘    │
│                                 │
│  呼入/呼出占比                  │
│  ┌─────────────────────────┐    │
│  │  呼出 85%  ████████░░   │    │
│  │  呼入 15%  ██░░░░░░░░   │    │
│  └─────────────────────────┘    │
│                                 │
├─────────────────────────────────┤
│  🏠      📞      📊      ⚙️    │
│  首页    通话    统计    设置   │
└─────────────────────────────────┘
```

---

## 📱 7. 设置页 (Settings) - Tab4

```
┌─────────────────────────────────┐
│  设置                           │
├─────────────────────────────────┤
│                                 │
│  ┌─────────────────────────┐    │
│  │  👤  张三                │    │
│  │      销售部 · 销售员     │    │
│  │      138****1234        │    │
│  │                    >    │    │
│  └─────────────────────────┘    │
│                                 │
│  设备信息                       │
│  ─────────────────────────────  │
│  ┌─────────────────────────┐    │
│  │ 📱 设备状态         已绑定│    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │ 🔗 绑定账号         张三 │    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │ ⏰ 绑定时间    12-25 10:30│   │
│  └─────────────────────────┘    │
│                                 │
│  通话设置                       │
│  ─────────────────────────────  │
│  ┌─────────────────────────┐    │
│  │ 🎙️ 自动录音          🔵 │    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │ 🔔 来电提醒          🔵 │    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │ 📳 振动提醒          ⚪ │    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │ 🔊 提示音            🔵 │    │
│  └─────────────────────────┘    │
│                                 │
│  其他设置                       │
│  ─────────────────────────────  │
│  ┌─────────────────────────┐    │
│  │ 🌐 服务器设置        >  │    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │ 🔋 后台保活设置      >  │    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │ ℹ️ 关于              >  │    │
│  └─────────────────────────┘    │
│                                 │
│  ┌─────────────────────────┐    │
│  │      🔓 解绑设备         │    │
│  └─────────────────────────┘    │
│  ┌─────────────────────────┐    │
│  │      🚪 退出登录         │    │
│  │      (红色文字)          │    │
│  └─────────────────────────┘    │
│                                 │
├─────────────────────────────────┤
│  🏠      📞      📊      ⚙️    │
│  首页    通话    统计    设置   │
└─────────────────────────────────┘
```

---

## 📱 8. 扫码绑定页 (Scan)

```
┌─────────────────────────────────┐
│  ←  扫码绑定                    │
├─────────────────────────────────┤
│                                 │
│                                 │
│   ┌───────────────────────┐     │
│   │                       │     │
│   │   ┌───────────────┐   │     │
│   │   │               │   │     │
│   │   │   扫描区域    │   │     │
│   │   │   (相机预览)  │   │     │
│   │   │               │   │     │
│   │   └───────────────┘   │     │
│   │                       │     │
│   │   ════════════════    │     │
│   │   (扫描线动画)        │     │
│   │                       │     │
│   └───────────────────────┘     │
│                                 │
│   请扫描PC端显示的绑定二维码    │
│                                 │
│   ┌───────────────────────┐     │
│   │  💡 操作步骤：         │     │
│   │  1. PC端登录CRM系统    │     │
│   │  2. 进入"外呼管理"     │     │
│   │  3. 点击"绑定设备"     │     │
│   │  4. 将二维码对准扫描框 │     │
│   └───────────────────────┘     │
│                                 │
│   ┌───────────────────────┐     │
│   │     🔦 打开手电筒      │     │
│   └───────────────────────┘     │
│                                 │
└─────────────────────────────────┘
```

---

## 📱 9. 通话中页面 (Calling)

```
┌─────────────────────────────────┐
│                                 │
│                                 │
│          ┌─────────┐            │
│          │  👤     │            │
│          │ (头像)  │            │
│          └─────────┘            │
│                                 │
│           王先生                │
│        138 1234 5678            │
│                                 │
│        ━━━━━━━━━━━━━            │
│                                 │
│           00:03:25              │
│          (通话计时)             │
│                                 │
│        🔴 录音中...             │
│                                 │
│                                 │
│   ┌─────┐  ┌─────┐  ┌─────┐    │
│   │ 🔇  │  │ 🔊  │  │ ⏸️  │    │
│   │静音 │  │免提 │  │保持 │    │
│   └─────┘  └─────┘  └─────┘    │
│                                 │
│   ┌─────┐  ┌─────┐  ┌─────┐    │
│   │ ⌨️  │  │ ➕  │  │ 📝  │    │
│   │键盘 │  │添加 │  │备注 │    │
│   └─────┘  └─────┘  └─────┘    │
│                                 │
│                                 │
│         ┌───────────┐           │
│         │    📵     │           │
│         │   挂断    │           │
│         │ (红色圆形) │           │
│         └───────────┘           │
│                                 │
│                                 │
└─────────────────────────────────┘
```

---

## 📱 10. 来电接听页面 (Incoming)

```
┌─────────────────────────────────┐
│                                 │
│                                 │
│          ┌─────────┐            │
│          │  👤     │            │
│          │ (头像)  │            │
│          └─────────┘            │
│                                 │
│           来电                  │
│                                 │
│          李女士                 │
│       139 5678 1234             │
│                                 │
│   ┌─────────────────────────┐   │
│   │ 📋 客户信息              │   │
│   │ ─────────────────────── │   │
│   │ 公司: XX科技有限公司     │   │
│   │ 标签: VIP客户            │   │
│   │ 上次通话: 12-20 15:30    │   │
│   │ 跟进状态: 意向客户       │   │
│   └─────────────────────────┘   │
│                                 │
│                                 │
│                                 │
│   ┌───────────┐ ┌───────────┐   │
│   │    📵     │ │    📞     │   │
│   │   拒接    │ │   接听    │   │
│   │ (红色)    │ │ (绿色)    │   │
│   └───────────┘ └───────────┘   │
│                                 │
│   ┌─────────────────────────┐   │
│   │    💬 短信回复           │   │
│   └─────────────────────────┘   │
│                                 │
└─────────────────────────────────┘
```

---

## 📱 11. PC端拨号指令弹窗

当收到PC端发来的拨号指令时：

```
┌─────────────────────────────────┐
│          (半透明遮罩)           │
│                                 │
│   ┌───────────────────────┐     │
│   │                       │     │
│   │    📞 收到拨号请求     │     │
│   │                       │     │
│   │    ─────────────────  │     │
│   │                       │     │
│   │    客户: 王先生        │     │
│   │    号码: 138 1234 5678│     │
│   │                       │     │
│   │    来自: PC端 - 张三   │     │
│   │    时间: 14:30:25     │     │
│   │                       │     │
│   │    ─────────────────  │     │
│   │                       │     │
│   │    ☑ 3秒后自动拨打    │     │
│   │       ━━━━━━━━━━      │     │
│   │       (倒计时进度条)   │     │
│   │                       │     │
│   │  ┌─────┐    ┌─────┐   │     │
│   │  │取消 │    │立即 │   │     │
│   │  │     │    │拨打 │   │     │
│   │  └─────┘    └─────┘   │     │
│   │                       │     │
│   └───────────────────────┘     │
│                                 │
└─────────────────────────────────┘
```

---

## 📱 12. 通话详情页 (CallDetail)

```
┌─────────────────────────────────┐
│  ←  通话详情                    │
├─────────────────────────────────┤
│                                 │
│  ┌─────────────────────────┐    │
│  │       👤                │    │
│  │      王先生              │    │
│  │   138 1234 5678         │    │
│  │                         │    │
│  │  ┌─────┐    ┌─────┐     │    │
│  │  │ 📞  │    │ 💬  │     │    │
│  │  │回拨 │    │短信 │     │    │
│  │  └─────┘    └─────┘     │    │
│  └─────────────────────────┘    │
│                                 │
│  通话信息                       │
│  ─────────────────────────────  │
│  ┌─────────────────────────┐    │
│  │ 通话类型      📤 呼出    │    │
│  │ ─────────────────────── │    │
│  │ 通话状态      ✅ 已接通  │    │
│  │ ─────────────────────── │    │
│  │ 通话时长      3分25秒    │    │
│  │ ─────────────────────── │    │
│  │ 开始时间      14:30:00   │    │
│  │ ─────────────────────── │    │
│  │ 结束时间      14:33:25   │    │
│  │ ─────────────────────── │    │
│  │ 通话来源      PC端指令   │    │
│  └─────────────────────────┘    │
│                                 │
│  通话录音                       │
│  ─────────────────────────────  │
│  ┌─────────────────────────┐    │
│  │  🎵 录音文件             │    │
│  │  ─────────────────────  │    │
│  │  ▶️ ━━━━━━━━━━━━ 3:25   │    │
│  │     (播放进度条)         │    │
│  │                         │    │
│  │  📥 下载录音             │    │
│  └─────────────────────────┘    │
│                                 │
│  客户信息                       │
│  ─────────────────────────────  │
│  ┌─────────────────────────┐    │
│  │ 公司: XX科技有限公司     │    │
│  │ 标签: 意向客户           │    │
│  │ 备注: 对产品感兴趣       │    │
│  │                    >    │    │
│  └─────────────────────────┘    │
│                                 │
└─────────────────────────────────┘
```

---

## 📱 13. 通话结束页面 (CallEnded)

```
┌─────────────────────────────────┐
│                                 │
│                                 │
│          ┌─────────┐            │
│          │  ✅     │            │
│          │ (绿勾)  │            │
│          └─────────┘            │
│                                 │
│         通话已结束              │
│                                 │
│          王先生                 │
│       138 1234 5678             │
│                                 │
│   ┌─────────────────────────┐   │
│   │                         │   │
│   │    通话时长: 3分25秒    │   │
│   │    通话状态: 已接通     │   │
│   │    录音状态: 已保存     │   │
│   │                         │   │
│   └─────────────────────────┘   │
│                                 │
│   添加通话备注                  │
│   ┌─────────────────────────┐   │
│   │                         │   │
│   │  客户对产品感兴趣，     │   │
│   │  需要发送报价单...      │   │
│   │                         │   │
│   └─────────────────────────┘   │
│                                 │
│   快捷标签                      │
│   ┌─────┐┌─────┐┌─────┐┌─────┐ │
│   │意向 ││无意向││再联系││成交 │ │
│   └─────┘└─────┘└─────┘└─────┘ │
│                                 │
│   ┌─────────────────────────┐   │
│   │        保存并返回        │   │
│   └─────────────────────────┘   │
│                                 │
│   ┌─────────────────────────┐   │
│   │        跳过              │   │
│   └─────────────────────────┘   │
│                                 │
└─────────────────────────────────┘
```

---

## 四、UI设计规范

### 4.1 配色方案

| 用途 | 颜色名称 | 色值 | 使用场景 |
|------|----------|------|----------|
| 主色 | 翠绿色 | #34D399 | 品牌色、主按钮、强调 |
| 主色浅 | 薄荷绿 | #6EE7B7 | 渐变、背景 |
| 成功 | 绿色 | #10B981 | 接通、成功状态 |
| 警告 | 橙色 | #F59E0B | 提醒、警告 |
| 危险 | 红色 | #EF4444 | 挂断、错误、未接 |
| 信息 | 蓝色 | #3B82F6 | 链接、信息提示 |
| 背景 | 浅灰 | #F9FAFB | 页面背景 |
| 卡片 | 白色 | #FFFFFF | 卡片背景 |
| 主文字 | 深灰 | #1F2937 | 标题、重要文字 |
| 次文字 | 灰色 | #6B7280 | 描述、次要信息 |
| 边框 | 浅灰 | #E5E7EB | 分割线、边框 |

### 4.2 渐变色

```css
/* 主渐变 - 用于按钮、头部 */
background: linear-gradient(135deg, #6EE7B7 0%, #34D399 100%);

/* 拨号按钮渐变 */
background: linear-gradient(135deg, #34D399 0%, #10B981 100%);

/* 挂断按钮渐变 */
background: linear-gradient(135deg, #F87171 0%, #EF4444 100%);
```

### 4.3 字体规范

| 类型 | 字号 | 字重 | 使用场景 |
|------|------|------|----------|
| 大标题 | 24px | Bold | 页面标题 |
| 标题 | 18px | Semibold | 卡片标题 |
| 正文 | 16px | Regular | 主要内容 |
| 辅助 | 14px | Regular | 次要信息 |
| 小字 | 12px | Regular | 时间、标签 |
| 数字 | 32px | Bold | 统计数字 |

### 4.4 圆角规范

| 元素 | 圆角 |
|------|------|
| 按钮 | 8px |
| 卡片 | 12px |
| 输入框 | 8px |
| 头像 | 50% (圆形) |
| 拨号按钮 | 50% (圆形) |
| 底部导航 | 0 |

### 4.5 间距规范

| 类型 | 间距 |
|------|------|
| 页面边距 | 16px |
| 卡片间距 | 12px |
| 元素间距 | 8px |
| 文字行高 | 1.5 |

---

## 五、交互设计

### 5.1 手势操作

| 手势 | 操作 | 场景 |
|------|------|------|
| 点击 | 选择/确认 | 按钮、列表项 |
| 长按 | 更多操作 | 通话记录 |
| 左滑 | 删除/更多 | 通话记录 |
| 下拉 | 刷新 | 列表页面 |
| 上拉 | 加载更多 | 通话记录 |

### 5.2 动画效果

| 场景 | 动画 | 时长 |
|------|------|------|
| 页面切换 | 滑动 | 300ms |
| 弹窗出现 | 缩放+淡入 | 200ms |
| 按钮点击 | 缩放反馈 | 100ms |
| 加载中 | 旋转 | 循环 |
| 扫描线 | 上下移动 | 2s循环 |
| 通话计时 | 数字跳动 | 1s |

### 5.3 反馈机制

| 操作 | 反馈 |
|------|------|
| 拨号成功 | 振动 + 提示音 |
| 来电 | 振动 + 铃声 + 弹窗 |
| 连接成功 | Toast提示 |
| 连接断开 | 顶部警告条 |
| 操作失败 | Toast + 振动 |

---

## 六、核心流程

### 6.1 首次使用流程

```
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  启动APP │───>│  登录    │───>│ 扫码绑定 │───>│  首页    │
│          │    │          │    │          │    │ 等待指令 │
└──────────┘    └──────────┘    └──────────┘    └──────────┘
```

### 6.2 PC端发起拨号流程

```
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  PC端    │    │  服务器  │    │   APP    │    │  系统    │
│ 点击拨号 │───>│ WebSocket│───>│ 收到指令 │───>│  拨号    │
└──────────┘    └──────────┘    └──────────┘    └──────────┘
                                     │
                                     ▼
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  PC端    │<───│  服务器  │<───│   APP    │<───│  通话中  │
│ 显示状态 │    │ 更新记录 │    │ 上报状态 │    │  页面    │
└──────────┘    └──────────┘    └──────────┘    └──────────┘
                                     │
                                     ▼
┌──────────┐    ┌──────────┐    ┌──────────┐
│  PC端    │<───│  服务器  │<───│   APP    │
│ 通话结束 │    │ 保存录音 │    │ 上传录音 │
└──────────┘    └──────────┘    └──────────┘
```

### 6.3 APP主动拨号流程

```
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  点击    │    │  拨号盘  │    │  系统    │    │  通话中  │
│ 拨号按钮 │───>│ 输入号码 │───>│  拨号    │───>│  页面    │
└──────────┘    └──────────┘    └──────────┘    └──────────┘
                                                     │
                                                     ▼
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  服务器  │<───│   APP    │<───│ 通话结束 │<───│  挂断    │
│ 同步记录 │    │ 上报结果 │    │  页面    │    │          │
└──────────┘    └──────────┘    └──────────┘    └──────────┘
```

### 6.4 来电接听流程

```
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  系统    │    │   APP    │    │  来电    │    │  用户    │
│  来电    │───>│ 监听到   │───>│ 弹窗显示 │───>│ 接听/拒接│
└──────────┘    └──────────┘    └──────────┘    └──────────┘
                                                     │
                                                     ▼ (接听)
┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐
│  服务器  │<───│   APP    │<───│ 通话结束 │<───│  通话中  │
│ 同步记录 │    │ 上报结果 │    │          │    │          │
└──────────┘    └──────────┘    └──────────┘    └──────────┘
```

---

## 七、技术实现要点

### 7.1 核心技术栈

| 技术 | 用途 |
|------|------|
| uni-app | 跨平台开发框架 |
| Vue3 + TypeScript | 前端开发 |
| Pinia | 状态管理 |
| WebSocket | 实时通信 |
| 原生插件 | 拨号、录音、通话监听 |

### 7.2 关键原生能力

| 能力 | Android | iOS |
|------|---------|-----|
| 拨打电话 | Intent.ACTION_CALL | tel:// |
| 通话状态监听 | PhoneStateListener | CallKit |
| 通话录音 | MediaRecorder | AVAudioRecorder |
| 后台保活 | 前台服务 | Background Modes |
| 来电识别 | BroadcastReceiver | CallKit |

### 7.3 权限清单

| 权限 | 用途 | 必需 |
|------|------|------|
| CALL_PHONE | 拨打电话 | ✅ |
| READ_PHONE_STATE | 监听通话状态 | ✅ |
| RECORD_AUDIO | 通话录音 | ✅ |
| CAMERA | 扫码绑定 | ✅ |
| INTERNET | 网络通信 | ✅ |
| FOREGROUND_SERVICE | 后台运行 | ✅ |
| VIBRATE | 振动提醒 | ⚪ |
| READ_CONTACTS | 显示联系人名称 | ⚪ |

### 7.4 数据存储

| 数据 | 存储方式 |
|------|----------|
| 用户Token | 加密本地存储 |
| 设备信息 | 本地存储 |
| 通话记录 | 服务器 + 本地缓存 |
| 录音文件 | 上传服务器后删除本地 |
| 设置项 | 本地存储 |

---

## 八、版本规划

### v1.0.0 基础版（MVP）
- [x] 登录/登出
- [x] 服务器配置（多租户支持）
- [x] 扫码绑定设备
- [x] WebSocket连接保持
- [x] 接收PC端拨号指令
- [x] 执行拨号
- [x] 通话状态上报
- [x] 基础通话记录

### v1.1.0 完善版
- [ ] 拨号盘手动拨号
- [ ] 通话录音
- [ ] 录音上传
- [ ] 来电显示客户信息
- [ ] 通话结束备注
- [ ] 快捷标签和客户意向
- [ ] 跟进记录同步

### v1.2.0 增强版
- [ ] 录音播放
- [ ] 通话统计图表
- [ ] 回拨功能
- [ ] 后台保活优化
- [ ] 消息通知
- [ ] 数据导出

### v2.0.0 高级版
- [ ] 客户信息查看
- [ ] 快捷回复短信
- [ ] 团队排行榜
- [ ] 智能推荐
- [ ] 多设备管理

---

## 九、总结

本APP是CRM系统的移动端外呼辅助工具，核心功能：

1. **远程拨号** - 接收PC端指令，控制手机拨号
2. **主动外呼** - 通过拨号盘主动拨打电话
3. **来电管理** - 来电显示客户信息，快速接听
4. **通话记录** - 完整的呼入呼出记录
5. **录音管理** - 自动录音并上传服务器
6. **数据统计** - 通话数据实时统计分析

设计理念：**简约美观、操作便捷、功能实用**
